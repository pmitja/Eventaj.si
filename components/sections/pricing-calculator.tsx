"use client";
import { useState } from "react";
import GlassesWithMustache from "../icons/GlassesWithMustache";
import PaintWithLamp from "../icons/PaintWithLamp";
import PersonWithHeart from "../icons/PersonWithHeart";
import ShareIcon from "../icons/pricing/ShareIcon";
import UnlimitedIcon from "../icons/pricing/UnlimitedIcon";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "../ui/select";

const locations = [
  { text: "Maribor in okolica", kilometri: 0 },
  { text: "Celje in okolica", kilometri: 30 },
  { text: "Ljubljana in okolica", kilometri: 110 },
  { text: "Kranj in okolica", kilometri: 135 },
  { text: "Novo mesto in okolica", kilometri: 170 },
  { text: "Koper in okolica", kilometri: 210 },
  { text: "Murska Sobota in okolica", kilometri: 40 },
  { text: "Ptuj in okolica", kilometri: 10 },
  { text: "Bled in okolica", kilometri: 110 },
  { text: "Postojna in okolica", kilometri: 30 },
  { text: "Nova Gorica in okolica", kilometri: 230 },
];

const threeSixtyHours = [
  { value: 2, price: 299 },
  { value: 3, price: 399 },
  { value: 4, price: 499 },
];

const basicBoothHours = [
  { value: 2, price: 249 },
  { value: 3, price: 299 },
  { value: 4, price: 349 },
];

const PricingCalculator = ({ type }: { type: "360" | "basic" }) => {
  const [selectedLocation, setSelectedLocation] = useState(locations[0]);
  const [selectedHours, setSelectedHours] = useState(
    type === "360" ? threeSixtyHours[0] : basicBoothHours[0]
  );

  const transportCost = selectedLocation.kilometri * 0.4;
  const totalPrice = selectedHours.price + transportCost;

  return (
    <div className="max-w-3xl mx-auto px-4 mt-12 md:mt-16 text-black">
      <div className="bg-[#C99566] text-white rounded-t-2xl p-6 text-center text-xl font-semibold">
        360° PHOTO BOOTH CENIK
      </div>

      <div className="bg-white rounded-b-2xl shadow-lg p-6 md:p-8">
        <div className="space-y-6">
          {/* Features List */}
          <div className="space-y-2 md:space-y-4 flex flex-col items-center">
            <div className="flex items-center gap-3">
              <div className="shrink-0">
                <UnlimitedIcon />
              </div>
              <p>Neomejeno število posnetkov</p>
            </div>
            <div className="flex items-center gap-3">
              <div className="shrink-0">
                <ShareIcon />
              </div>
              <p>Takojšnja delitev posnetkov</p>
            </div>
            <div className="flex items-center gap-3">
              <div className="shrink-0">
                <PersonWithHeart />
              </div>
              <p>Operater za pomoč</p>
            </div>
            <div className="flex items-center gap-3">
              <div className="shrink-0">
                <PaintWithLamp />
              </div>
              <p>Prilagoditev po vaših željah</p>
            </div>
            <div className="flex items-center gap-3">
              <div className="shrink-0">
                <GlassesWithMustache />
              </div>
              <p>Rekviziti za fotografiranje</p>
            </div>
          </div>

          <div className="border-t border-gray-200 pt-6">
            <h3 className="flex items-center justify-center gap-4 font-semibold text-xl md:text-2xl mb-6">
              <span>Izvedite informativno ceno</span>
              <svg
                width="55"
                height="59"
                viewBox="0 0 55 59"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className="w-12 h-12 translate-y-4"
              >
                <path
                  d="M13.9394 17.0212C13.8917 17.035 13.8728 17.0575 13.8373 17.0732C13.5772 17.0261 13.3188 16.9792 13.0561 16.9359C12.9622 16.9214 12.869 16.8887 12.7668 16.9266C12.6135 16.9834 12.5189 17.1072 12.4502 17.1982C12.2035 17.5258 12.0787 17.8892 12.0467 18.2287C12.0259 18.457 12.0128 18.8686 12.4572 18.9414C13.6271 19.1316 14.7643 19.3648 15.8723 19.6302C15.8715 19.6484 15.8143 19.6537 15.67 19.6427C16.4195 19.8444 16.0597 19.7141 16.0167 19.6637C16.3797 19.7522 16.74 19.8444 17.0987 19.9392C17.1215 19.971 17.1461 20.0058 16.7693 19.9181C17.3538 20.1141 17.4709 20.094 17.5836 20.069C18.2435 20.2498 18.8948 20.4406 19.5349 20.6395C19.6465 20.6934 19.7337 20.7435 19.7949 20.784C20.3696 20.9601 20.6926 21.0424 20.8952 21.0779C21.2227 21.1877 21.5494 21.2987 21.8708 21.4118C21.7037 21.3719 21.5855 21.3593 21.5702 21.405C22.7405 21.6461 23.7595 22.0869 24.7513 22.4911C25.8712 22.9475 26.9601 23.433 28.0005 23.9477C30.0422 24.9584 31.9344 26.0746 33.6 27.2998C34.8496 28.2208 35.9676 29.2064 36.9324 30.2487C37.1461 30.5654 37.2597 30.6507 37.3514 30.7114C37.475 30.8533 37.5917 30.9969 37.7092 31.1421C37.545 31.0321 37.3846 30.9593 37.2352 30.8474C37.5749 31.1736 37.745 31.2718 37.9206 31.3963C38.0225 31.5278 38.1174 31.661 38.2148 31.7932C38.2116 31.8266 38.1629 31.8106 38.1526 31.8344C38.2718 31.9601 38.3732 32.0491 38.4651 32.1268C38.7095 32.492 38.9652 32.8547 39.1958 33.2234C39.1854 33.2274 39.2189 33.2863 39.3745 33.5178C39.7848 34.2078 40.1362 34.9142 40.3688 35.646C40.375 35.7656 40.3617 35.8454 40.3411 35.8761C40.3804 35.8921 40.4224 35.9296 40.4688 35.9833C40.5665 36.3584 40.6364 36.732 40.6812 37.1087C40.6899 37.439 40.7021 37.7698 40.69 38.1025C40.6385 38.1793 40.6034 38.1372 40.5908 38.0844C40.5639 37.9786 40.5656 37.8674 40.5552 37.7599C40.5352 37.538 40.5264 37.3108 40.4578 37.0955C40.4998 37.7824 40.5243 37.9062 40.5762 38.1005L40.3953 37.8524L40.2198 37.7449L40.587 38.1502C40.5995 38.1945 40.613 38.246 40.6274 38.3075C40.509 38.1749 40.3698 38.0306 40.2288 37.8889C39.983 37.5714 39.7364 37.2553 39.4862 36.9387C39.5116 36.9581 39.5317 36.9795 39.5597 36.998C38.9838 36.3572 39.4565 36.5882 38.7958 35.9852C38.8531 36.083 38.9114 36.2105 38.989 36.3495C38.669 35.9854 38.3334 35.6273 37.977 35.2773C37.885 35.1714 37.8654 35.1176 38.0048 35.1701C37.6662 34.8624 37.3796 34.6516 37.2375 34.5859C37.0441 34.4135 36.8481 34.2422 36.6487 34.0731C37.0003 34.2586 37.5528 34.6938 37.0273 34.1554L36.6955 33.9518C36.5794 33.8789 36.4642 33.8075 36.3774 33.7108L36.3105 33.716C36.3035 33.7008 36.2772 33.6742 36.2404 33.6403C36.208 33.6056 36.1469 33.5623 36.0349 33.569C35.7474 33.5798 35.4566 33.7072 35.222 33.8108C35.164 33.8371 34.6076 34.0972 34.5951 34.0643C34.2953 34.2651 34.0886 34.4873 33.8881 34.7204C33.598 34.9411 33.3278 35.2637 33.6622 35.4719C33.7138 35.5095 33.7731 35.5413 33.8307 35.5755C33.7729 35.5215 33.7283 35.4793 33.7038 35.4558C33.3916 35.2029 33.7787 34.8292 34.0869 34.5901C34.446 34.3095 34.8938 34.0482 35.3673 33.8346C35.5361 33.7632 35.7334 33.6666 36.0032 33.6305C35.9842 33.6389 35.9417 33.6479 35.8862 33.6619C35.5576 33.7397 35.2601 33.9056 35.0076 34.0502C34.6583 34.2505 34.3352 34.4745 34.0818 34.7178C33.9059 34.8855 33.6863 35.1213 33.7903 35.3039C33.8767 35.4584 34.1244 35.5926 34.2784 35.7208C34.4848 35.8938 34.686 36.0688 34.882 36.2458C34.9121 36.3154 34.7184 36.2093 34.6992 36.2007C34.625 36.1625 34.5447 36.1049 34.4472 36.087C34.6852 36.3016 34.9223 36.509 35.1975 36.7053C35.4308 36.8725 35.6398 37.0417 35.7934 37.2418C35.5659 37.0345 35.4497 36.9587 35.4297 36.9571C35.441 36.9574 35.564 37.1288 35.5763 37.1448C35.6465 37.2291 35.7201 37.311 35.7903 37.3952C35.9323 37.5583 36.0874 37.722 36.1948 37.8966C36.1428 37.482 35.7381 37.0696 35.4027 36.7313C36.5618 37.8417 37.4635 39.0352 38.393 40.2274C38.7282 40.6546 38.8747 41.1459 39.2628 41.5544C39.4117 41.7101 39.6874 41.9629 40.0776 41.8791C40.558 41.7753 41.015 41.4603 41.3424 41.2355L41.3469 41.4663L41.4901 41.1326C41.8847 40.8419 42.2027 40.5253 42.478 40.1951C42.4893 40.1897 42.4945 40.1905 42.4955 40.2006C42.5031 40.1834 42.5099 40.1647 42.5202 40.1437C42.7894 39.8139 43.0186 39.4723 43.2382 39.125C43.2268 39.2192 43.1688 39.3543 43.0307 39.5631C43.4913 39.0567 43.8214 38.5161 44.1212 37.9835C44.4303 37.4312 44.7062 36.854 44.7964 36.2905C44.81 36.2587 44.828 36.2262 44.8417 36.1944C45.2476 35.5836 44.7492 36.7956 44.6402 37.1812C45.3193 35.9574 45.8548 34.7158 46.36 33.4793C46.8327 32.3198 47.2577 31.1571 47.5793 29.9912C47.3696 29.9462 47.5276 29.7136 47.4568 29.3384L47.5835 29.1067C47.5433 29.181 47.4997 29.0571 47.4331 29.0934C47.5301 28.6255 47.608 28.1576 47.6529 27.6901C47.6786 27.4315 47.2948 27.5629 47.0334 27.6695C46.2099 28.0042 45.3042 28.5732 45.2141 29.1452C45.1533 28.9297 45.2366 28.7054 45.4243 28.4943C45.2822 28.6545 45.1594 28.8205 45.0964 28.9915C45.022 29.2398 45.0258 29.4917 44.9852 29.7409C44.9463 29.9848 44.8779 30.2298 44.8165 30.473C44.6936 30.9595 44.5472 31.4465 44.4373 31.9336C44.3992 31.8388 44.4373 31.719 44.4504 31.6194C44.4793 31.422 44.5089 31.2232 44.5456 31.0256C44.6047 30.7114 44.6343 30.3984 44.6935 30.0842C44.6342 30.3757 44.58 30.6681 44.5112 30.9596C44.4826 31.0794 44.4531 31.1977 44.4098 31.3167C44.397 31.3528 44.3772 31.474 44.3044 31.4966L44.4286 31.6005C44.168 32.4723 44.3208 31.4808 44.1311 31.7636C44.0456 32.0454 43.9471 32.3324 43.9094 32.6145C43.898 32.6975 43.8634 32.8319 43.9776 32.8848C44.1276 32.9559 44.1739 32.9814 44.1672 33.1201C44.0626 33.4047 43.952 33.6898 43.8431 33.9723C43.8071 34.0401 43.7774 34.1217 43.7512 34.2122C43.6695 34.4227 43.5886 34.6319 43.5086 34.8398C43.4938 34.7274 43.3884 34.7986 43.3254 34.844C43.3534 35.1998 43.1823 35.5264 42.981 35.8779C42.7746 36.2371 42.6281 36.5985 42.4686 36.9622C42.4252 36.9696 42.5827 36.3515 42.5179 36.2907C42.4572 36.5242 42.3586 36.797 42.2583 37.0639C42.2346 36.8216 42.1995 36.5565 42.1918 36.8969C42.1996 37.0054 42.209 37.0916 42.2209 37.1654C42.1775 37.2787 42.1367 37.391 42.0968 37.5048C42.086 36.9201 42.0657 36.3354 41.9681 35.7599C41.9834 35.8314 41.9881 36.1992 42.1655 36.2181C42.3446 36.2372 42.3599 36.4174 42.3867 36.5034C42.1699 35.7995 41.9618 35.0883 41.6349 34.4055L41.4973 34.1386C41.454 34.0572 41.4134 33.9775 41.3702 33.896C41.2013 33.4182 40.996 32.9461 40.756 32.4828C40.7976 32.4751 40.8551 32.4896 40.9544 32.5303C40.866 32.3303 40.7784 32.1291 40.6613 31.9345C40.6172 31.86 40.5697 31.7821 40.4832 31.7222C40.2089 31.5302 40.068 31.2911 39.9175 31.0519C40.0038 31.1979 40.0893 31.3424 40.1738 31.4881C39.7956 30.9047 39.3602 30.3378 38.9074 29.7767C38.984 29.7942 39.0783 29.851 38.9319 29.6802C38.8157 29.6045 38.6984 29.496 38.5784 29.3688C38.1294 28.8337 37.7946 28.2485 37.2641 27.7432C37.3279 27.794 37.3857 27.8481 37.4443 27.9009C37.2529 27.6511 37.0399 27.4079 36.8338 27.163C36.8302 27.154 36.8416 27.16 36.8415 27.1543C36.8171 27.1477 36.7936 27.1399 36.7693 27.1389C36.4967 26.6212 35.9257 26.1562 35.3812 25.7405C35.1416 25.6457 34.9656 25.4732 34.7839 25.3463C34.5183 25.1614 34.2666 24.9673 33.995 24.7857C33.7199 24.6007 33.443 24.4154 33.1584 24.236C32.9872 24.1278 32.8125 23.9992 32.5921 23.9214C32.9558 24.1088 33.2223 24.2953 33.5867 24.5759L33.3924 24.6024C32.6858 24.1251 33.4776 24.504 32.7081 24.0946C32.6904 24.1611 32.79 24.2301 32.8503 24.2746C32.9814 24.3767 33.1359 24.4697 33.2904 24.5599C33.5854 24.7352 33.9064 24.9033 34.1504 25.1061C33.8652 24.9647 33.5938 24.8085 33.3337 24.6499C33.4656 24.7422 33.6027 24.8325 33.7303 24.9256C33.5905 24.8278 33.449 24.7297 33.3066 24.633C33.3162 24.6387 33.3258 24.6444 33.3337 24.6499C32.952 24.392 32.5608 24.1368 32.1618 23.8876C32.2183 23.8921 32.2207 23.8656 32.1158 23.776C31.7103 23.4763 31.2541 23.2408 30.7043 23.0333C30.4477 22.8892 30.1877 22.7475 29.9243 22.6081C29.8409 22.5007 29.7828 22.4126 29.6449 22.3236C29.4729 22.2138 29.2775 22.1159 29.0822 22.0209C29.3715 22.1361 29.6539 22.253 29.9363 22.3728C29.7701 22.2286 29.5761 22.0942 29.3148 22.0059C29.0614 21.9203 28.8089 21.8531 28.5969 21.7343C28.749 21.8566 28.7084 21.8828 29.3807 22.2081C29.3909 22.2788 28.8582 22.0428 28.6089 21.9282L28.7606 22.008C28.7502 22.0064 28.7406 22.0035 28.7328 22.0009C28.0499 21.6655 27.3507 21.3431 26.6341 21.0322C26.6289 21.0286 26.6211 21.026 26.6176 21.0226L26.8667 21.109C26.2733 20.8834 25.7084 20.6354 25.1245 20.4014L25.1445 20.4003C25.1097 20.3892 25.0766 20.3785 25.0444 20.3693C24.7524 20.2523 24.457 20.1376 24.1608 20.0241C24.2546 20.033 24.2301 20.0038 23.8764 19.8815C23.9841 19.8783 24.1009 19.9246 24.1862 19.9518C24.3595 20.0054 24.5268 20.065 24.6906 20.127C25.0226 20.2558 25.3468 20.3905 25.6641 20.5298C25.4593 20.4403 25.1422 20.3321 25.0264 20.1901C24.9966 20.1544 25.0906 20.1745 25.1115 20.1806C25.2847 20.2228 25.4398 20.2891 25.5958 20.3484C25.4286 20.1914 24.7254 20.0321 24.2747 19.8257C24.3385 19.8765 24.1541 19.8396 24.1665 19.8726C24.2448 19.7816 23.3898 19.5368 23.2957 19.5054C23.0876 19.4408 22.876 19.3814 22.6576 19.3265C22.608 19.3147 22.3415 19.2284 22.2774 19.2609L23.2491 19.5349C23.2417 19.5888 22.8126 19.4846 22.5376 19.4281C20.1882 18.5986 17.6448 17.855 15.0171 17.3088C15.0742 17.278 15.3 17.279 15.0213 17.1824C14.842 17.1378 14.66 17.0914 14.4713 17.058C14.3286 17.0332 14.0875 16.9777 13.9281 17.0237C13.9783 17.0089 13.8804 17.0375 13.9281 17.0237L13.9394 17.0212ZM35.2031 36.6454C34.8758 36.3409 35.0477 36.445 34.916 36.2694C35.0674 36.4043 35.2136 36.5412 35.358 36.6778L35.204 36.6442L35.2031 36.6454ZM41.9416 36.4574C41.9535 36.7486 41.9671 37.0402 41.9721 37.3331C41.9564 37.0103 41.9356 36.6866 41.9052 36.3657C41.9135 36.3218 41.9209 36.2707 41.9291 36.207C41.9291 36.207 41.9351 36.3068 41.9416 36.4574C41.948 36.608 41.9351 36.3068 41.9416 36.4574ZM36.1782 26.8728C36.0601 26.7656 35.9393 26.6595 35.8178 26.5546C36.0275 26.7055 36.1194 26.7973 36.1782 26.8728ZM35.3111 26.0939C35.5137 26.2296 35.7136 26.3522 35.903 26.4619C36.067 26.6523 35.96 26.6401 35.8081 26.5461C35.5317 26.3058 35.2449 26.0696 34.9529 25.8354C35.0691 25.9225 35.1871 26.0099 35.312 26.0927C35.1932 26.0122 35.5146 26.2284 35.312 26.0927L35.3111 26.0939Z"
                  fill="#6695C9"
                />
              </svg>
            </h3>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label className="block text-sm mb-2">Vaša lokacija</label>
              <Select
                value={selectedLocation.text}
                onValueChange={(value) => {
                  const location = locations.find((l) => l.text === value);
                  if (location) setSelectedLocation(location);
                }}
              >
                <SelectTrigger className="text-black bg-white">
                  <SelectValue placeholder="Izberite lokacijo" />
                </SelectTrigger>
                <SelectContent>
                  {locations.map((location) => (
                    <SelectItem key={location.text} value={location.text}>
                      {location.text}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>
            <div>
              <label className="block text-sm mb-2">Število ur najema</label>
              <Select
                value={selectedHours.value.toString()}
                onValueChange={(value) => {
                  const hour =
                    type === "360"
                      ? threeSixtyHours.find(
                          (h) => h.value.toString() === value
                        )
                      : basicBoothHours.find(
                          (h) => h.value.toString() === value
                        );
                  if (hour) setSelectedHours(hour);
                }}
              >
                <SelectTrigger className="text-black bg-white">
                  <SelectValue placeholder="Izberite dolžino" />
                </SelectTrigger>
                <SelectContent>
                  {type === "360"
                    ? threeSixtyHours.map((hour) => (
                        <SelectItem
                          key={hour.value}
                          value={hour.value.toString()}
                        >
                          {hour.value} {hour.value === 1 ? "ura" : "ure"}
                        </SelectItem>
                      ))
                    : basicBoothHours.map((hour) => (
                        <SelectItem
                          key={hour.value}
                          value={hour.value.toString()}
                        >
                          {hour.value} {hour.value === 1 ? "ura" : "ure"}
                        </SelectItem>
                      ))}
                </SelectContent>
              </Select>
            </div>
          </div>

          <div className="my-20 text-center">
            <div className="text-5xl md:text-7xl font-bold text-[#6695C9]">
              {totalPrice.toFixed(0)} €
            </div>
            <p className="my-4 opacity-70 text-gray-500 text-sm">
              Povprašajte za 360° photo booth in takoj vam bomo poslali ponudbo
              s točno ceno.
            </p>
          </div>
        </div>

        <button className="w-full bg-[#C99566] text-white py-4 rounded-xl font-semibold hover:bg-[#b88455] transition-colors">
          Informativni izračun
        </button>
      </div>
    </div>
  );
};

export default PricingCalculator;
